@echo off

set "uzivFile="
set "pswdDefault="

:getopts
if "%~1"=="" goto :uziv_Prepinac
if i/ "%~1"=="-uziv.txt"(
    set "uzivFile=%~2"
    shift
    shift
    goto :getopts
)

:uziv_Prepinac
if not defined uzivFile (
    echo Prepinac -uziv.txt je povinny.
Konec skriptu.
    exit /b 1
)

for /f "tokens=1-4" %%a in (%uzivFile%) do (
    set "jmeno=%%a"
    set "fullname=%%a %%b"
    set "pswd=%%c"
    set "group=%%d"

    net !jmeno! !pswd! /add /fullname: "!fullname!"
    net localgroup !group! !jmeno! /add

    echo Uzivatel !fullname! 
    vytvoren s heslem !pswd!
    a pridan do skupiny !group!
)